<style>
    .centre {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
    }
    #chatContainer {
        transition: all .25s linear;
        width: 60%;
    }
</style>

<div class="centre">
    <script>
        insertTemplate(document.currentScript.parentElement, 'chatContainer');
        function gotoNext() {
            var toUrl = window.location.origin;
            if (!toUrl.endsWith('/')) {
                toUrl += '/';
            }
            fetch(toUrl+'api/v1/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        'messages': [
                            {
                                'role': 'user',
                                'content': document.getElementById('chatIn').value
                            }
                        ]
                    })
                })
                .then(resp => resp.json())
                .then(json => {
                    if (json.status === 'error') {
                        alert(json.message);
                        home();
                        return;
                    }
                    window.location.replace(toUrl+'chat/'+json.id);
                });
        }

        function onChatGo() {
            const cont = document.getElementById('chatContainer');
            cont.style.width = "90%";
            cont.style.transform = "translateY(calc(50vh - 50% - 17px))"
            document.getElementById('chatIn').disabled = true;

            setTimeout(gotoNext, 250);
        }
    </script>
</div>
